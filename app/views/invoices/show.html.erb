<% provide(:title, t('invoice.show.title')) %>

<legend><%= t('invoice.show.legend') %></legend>

<div class="well well-large">
  <div style="overflow:auto">
    <div style="width:30%;float:left;margin-left:15%">
      <strong><%= t('invoice.show.sender') %></strong>
      <p>
        <%= raw @sender_data %>
      </p>
    </div>
    <div style="width:35%;float:right">
      <strong><%= t('invoice.show.adressee') %></strong>
      <p>
        <%= raw @adressee_data %>
      </p>
    </div>
  </div>
  <dl class="dl-horizontal">
    <dt>ID</dt>
    <dd><%= @invoice.id %></dd>
    <dt><%= t('invoice.show.items') %></dt>
    <dd><%= @invoice.items %></dd>
    <dt><%= t('invoice.show.date') %></dt>
    <dd><%= @invoice.created_at.to_date %></dd>
  </dl>

  <dl class="dl-horizontal">
    <% @entry_data.each do |classdata| %>
      <% unless classdata.length == 0 %>
        <dt><%= @classes[classdata[0].class_id - 1].name %></dt>
        <dd><%= classdata.length %></dd>
      <% end %>
    <% end %>
  </dl>

  <dl class="dl-horizontal">
    <% @entry_status.each_with_index do |statusdata, index| %>
      <% unless statusdata == 0 %>
        <dt><%= @statuses[index] %></dt>
        <dd><%= statusdata %></dd>
      <% end %>
    <% end %>
  </dl>
</div>

<div>
  <% if @entries.length == 0 %>
    <p><%= t('invoice.show.empty_list') %></p>
  <% else %>
    <table class="table table-condensed table-striped">
      <thead>
        <tr>
          <th><%= t('global.number') %></th>
          <th><%= t('global.appliance') %></th>
          <th><%= t('global.brand') %></th>
          <th><%= t('global.type') %></th>
          <th><%= t('global.serial') %></th>
          <th style="width:17px;"></th>
        </tr>
      </thead>
      <tbody>
        <% @entry_data.each do |classdata| %>
          <% unless classdata.length == 0 %>
            <tr>
              <td><strong><%= "#{t('global.class')} #{@classes[classdata[0].class_id - 1].name}" %></strong></td>
              <td></td><td></td><td></td><td></td><td></td>
            </tr>
            <% classdata.each do |entry| %>
              <tr>
                <td><%= entry.company[0].upcase! + @appliances[entry.appliance_id - 1].abb + entry.number.to_s %></td>
                <td><%= @appliances[entry.appliance_id - 1].name %></td>
                <td><%= entry.brand %></td>
                <td><%= entry.typenum %></td>
                <td><%= entry.serialnum %></td>
                <% if entry.scrap == 1 %>
                  <td><span class="glyphicon glyphicon-trash"></span></td>
                <% elsif entry.repaired == 1 %>
                  <td><span class="glyphicon glyphicon-wrench"></span></td>
                <% elsif entry.test == 1 %>
                  <td><span class="glyphicon glyphicon-ok"></span></td>
                <% else %>
                  <td></td>
                <% end %>
              </tr>
            <% end %>
          <% end %>
        <% end %>
      </tbody>
    </table>
  <% end %>
</div>

<div class="well well-large">
  <div style="overflow:auto">
    <div style="width:30%;float:left;margin-left:15%">
      <strong><%= t('invoice.show.signature_sender') %></strong>
      <p style="margin-top:50px">
        ____________________
      </p>
    </div>
    <div style="width:35%;float:right">
      <strong><%= t('invoice.show.signature_adressee') %></strong>
      <p style="margin-top:50px">
        ____________________
      </p>
    </div>
  </div>
</div>
